<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>ONEK - Réinitialisation du mot de passe</title>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</link>
	<h:outputStylesheet library="css" name="user.css" />
</h:head>
<f:metadata>
	<f:event type="preRenderView" listener="#{resetPassword.before}" />
</f:metadata>
<h:body>

	<div class="ui-g">
		<!-- Pas d'accès -->
		<h:form rendered="#{not resetPassword.tokenIsValid}">
			<p>Vous n'avez pas accès à cette page.</p>
		</h:form>	
		<!-- Réinitialiser le mot de passe -->
		<h:form rendered="#{resetPassword.tokenIsValid}">
			<p:growl id="msgs" showDetail="true" />
			<p:panel header="ONEK - Réinitialiser mon mot de passe">
				<h:panelGrid columns="2" cellpadding="5">					
					<p:outputLabel for="nouveaumotdepasse"
						value="Nouveau mot de passe:" />
					<p:password id="nouveaumotdepasse" name="nouveaumotdepasse"
						placeholder="Entrez votre nouveau mot de passe" size="30"
						value="#{resetPassword.newPassword}" required="true"/>
					<p:outputLabel for="confirmermotdepasse"
						value="Confirmer mot de passe:" />
					<p:password id="confirmermotdepasse" name="confirmermotdepasse"
						placeholder="Confirmez votre nouveau mot de passe" size="30"
						value="#{resetPassword.confirmNewPassword}" required="true"/>
					<br />
					<p:commandButton value="Valider" action="#{resetPassword.reset}"
						icon="ui-icon-check" update="msgs" ajax="false"  />					
				</h:panelGrid>
			</p:panel>
			<h4>#{resetPassword.logInfo}</h4>
		</h:form>

	</div>
</h:body>
</html>