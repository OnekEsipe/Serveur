<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>ONEK' - Mon compte</title>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</link>
	<h:outputStylesheet library="css" name="user.css" />
</h:head>
<f:metadata>
	<f:event type="preRenderView" listener="#{userInfo.before}" />
</f:metadata>
<h:body>
	<!-- Insertion du menu -->
	<h:outputStylesheet library="css" name="accueil.css" />
	<ui:include src="#{accueil.typeMenu}" />
	<br />
	<br />

	<div class="ui-g" style="width:80%; margin:auto;">
		<div class="ui-g-6">
			<!-- Modification du mot de passe -->
			<h:form id="changepassword">				
				<p:panel header="Modifier mon mot de passe">
					<h:panelGrid columns="2" cellpadding="5">
						<p:outputLabel for="motdepasseactuel" value="Mot de passe actuel:" />
						<p:password id="motdepasseactuel" name="motdepasseactuel"
							placeholder="Entrez votre mot de passe actuel" size="30"
							value="#{userInfo.lastPassword}" required="true" />

						<p:outputLabel for="nouveaumotdepasse"
							value="Nouveau mot de passe:" />
						<p:password id="nouveaumotdepasse" name="nouveaumotdepasse"
							placeholder="Entrez votre nouveau mot de passe" size="30"
							value="#{userInfo.newPassword}" required="true" />

						<p:outputLabel for="confirmermotdepasse"
							value="Nouveau mot de passe:" />
						<p:password id="confirmermotdepasse" name="confirmermotdepasse"
							placeholder="Confirmez votre nouveau mot de passe" size="30"
							value="#{userInfo.confirmNewPassword}" required="true" />
						<br />
						<p:commandButton value="Valider" action="#{userInfo.modifyPassword}"
							icon="ui-icon-check" update="changepassword" ajax="true"/>
						<h4>#{userInfo.logPassword}</h4>
					</h:panelGrid>
				</p:panel>
			</h:form>
		</div>

		<div class="ui-g-6">
			<!-- Modification addresse e-mail  -->
			<h:form id="changemail">				
				<p:panel header="Modifier mon adresse mail">
					<h:panelGrid columns="2" cellpadding="5">
						<p:outputLabel value="Adresse mail actuelle :" />
						<h:outputText value="#{userInfo.lastEmail}"></h:outputText>
						<p:outputLabel for="nouveauemail" value="Nouveau e-mail:" />
						<p:inputText id="nouveauemail" name="nouveauemail" size="30"
							validatorMessage="Format de l'adresse mail invalide"
							value="#{userInfo.newEmail}" required="true">
							<f:validateRegex
								pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
						</p:inputText>
						<p:watermark for="nouveauemail"
							value="Entrez la nouvelle adresse mail" />
						<p:message for="nouveauemail" />
						<br />
						<p:commandButton value="Valider" action="#{userInfo.modifyMail}"
							icon="ui-icon-check" update="changemail" ajax="true" style="margin-top:14.6%;"/>
						<h4>#{userInfo.logEmail}</h4>
					</h:panelGrid>
				</p:panel>
			</h:form>
		</div>
	</div>
	<br/>
	<!-- Insertion du footer -->
	<ui:include src="footer.xhtml" />
</h:body>
</html>