<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Onek team</title>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</link>
	<h:outputStylesheet library="css" name="attrib.css" />
</h:head>
<f:metadata>
	<f:viewParam name="event" value="#{attributionjc.idEvent}" />
	<f:event type="preRenderView" listener="#{attributionjc.before}" />
</f:metadata>
<h:body>
	<!-- Insertion du menu -->
	<ui:include src="#{accueil.typeMenu}" />
	<ui:include src="menuGauche.xhtml"></ui:include>

	<div class="ui-g">
		<div class="ui-g-2"></div>
		<div class="ui-g-10">

			<div class="ui-g">
				<div class="ui-g-8">
					<p:panel id="AttributionAutomatique"
						rendered="#{attributionjc.isopen}"
						header="Attribuer des cadidats automatiquement"
						style="height:100px">
						<h:form>
							<div class="ui-g-2">
								<p:outputLabel>Nombre de </p:outputLabel>
							</div>
							<div class="ui-g-4">
								<p:selectOneMenu id="methode" value="#{attributionjc.methode}"
									style="width:125px">
									<f:selectItem itemLabel="Jury par Candidat" itemValue="1" />
									<f:selectItem itemLabel="Candidat par Jury" itemValue="2" />
								</p:selectOneMenu>
							</div>
							<div class="ui-g-2">
								<p:spinner value="#{attributionjc.randomX}" min="1" max="99"
									size="1" />
							</div>
							<div class="ui-g-4">
								<p:commandButton value="Attribuer" id="withIcon"
									icon="ui-icon-refresh" update="tableCheckBox"
									actionListener="#{attributionjc.attributionAutomatique}" />
							</div>
						</h:form>
					</p:panel>
				</div>
			</div>

			<br />
			<!-- Attribution manuel -->
			<h4>#{attributionjc.avertissementMessage}</h4>
			<div class="ui-g">

				<h:form id="tableCheckBox">
					<div class="tableau">
						<table>
							<thead>
								<tr>
									<th>Jurys/Candidats</th>
									<ui:repeat value="#{attributionjc.candidatsJurys}"
										var="candidat">
										<th>#{candidat}</th>
									</ui:repeat>
								</tr>
							</thead>
							<tbody>
								<ui:repeat value="#{attributionjc.juryList}" var="jury">
									<tr>
										<td style="background: #f1f1f1;">#{jury.utilisateur}</td>
										<ui:repeat value="#{attributionjc.candidatsJurys}"
											var="candidat">
											<td align="center"><p:selectBooleanCheckbox
													value="#{attributionjc.attribJC[jury][candidat]}" /></td>
										</ui:repeat>
									</tr>
								</ui:repeat>
							</tbody>
						</table>
					</div>
					<br />
					<div class="ui-g">
						<div class="ui-g-6"></div>
						<div class="ui-g-6">
							<p:commandButton value="Enregistrer les attributions"
								actionListener="#{attributionjc.validationButton}" />
							<p:commandButton value="Vider les attributions"
								actionListener="#{attributionjc.clearButton}"
								update="tableCheckBox" />
						</div>
					</div>

				</h:form>
			</div>
		</div>
	</div>
</h:body>
</html>
