<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Onek team</title>
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</link>
</h:head>
<f:metadata>
	<f:viewParam name="event" value="#{attributionjc.idEvent}" />
	<f:event type="preRenderView" listener="#{attributionjc.before}" />
</f:metadata>
<h:body>
	<!-- Insertion du menu -->

	<ui:include src="menu.xhtml" />
	<br />
	<br />

	<h:form>
		<div class="ui-g">
			<div class="ui-g-6">
				<p:outputLabel for="methode" value="Méthode:" />
				<p:selectOneMenu id="methode" value="#{attributionjc.methode}"
					style="width:125px">
					<f:selectItem itemLabel="Nombre Jury/Candidat" itemValue="1" />
					<f:selectItem itemLabel="Nombre Candidat/Jury" itemValue="2" />
				</p:selectOneMenu>
				<p:spinner value="#{attributionjc.randomX}" min="1" max="99"
					size="1" />
			</div>
			<div class="ui-g-6">
				<p:commandButton value="Atribuer automatiquement" id="withIcon"
					icon="ui-icon-refresh"
					actionListener="#{attributionjc.attributionAutomatique}" />
			</div>
		</div>
	</h:form>

	<div class="ui-g">
		<h:form>
			<table>
				<thead>
					<tr>
						<th>Jurys/Candidats</th>
						<ui:repeat value="#{attributionjc.candidats.values().toArray()}"
							var="candidat">
							<th>#{candidat.nom} #{candidat.prenom}</th>
						</ui:repeat>
					</tr>
				</thead>
				<tbody>
					<ui:repeat value="#{attributionjc.jurys.entrySet().toArray()}"
						var="jury">
						<tr>
							<td>#{jury.value.nom} #{jury.value.prenom}</td>
							<ui:repeat value="#{attributionjc.candidats.keySet().toArray()}"
								var="candidat">
								<td align="center"><p:selectBooleanCheckbox
										value="#{attributionjc.attribJC[jury.key][candidat]}" /></td>
							</ui:repeat>
						</tr>
					</ui:repeat>
				</tbody>
			</table>
			<br />
			<br />
			<div class="ui-g">
				<div class="ui-g-12">
					<p:commandButton value="Prévisualiser les attributions"
						actionListener="#{attributionjc.previsualisationButton}"
						update="@(form)" />
				</div>
				<div class="ui-g-12">
					<p:commandButton value="Valider les attributions"
						actionListener="#{attributionjc.validationButton}" />
				</div>
			</div>
			<br />
			<p:dataList value="#{attributionjc.message}" var="message">
				<f:facet name="header">
            		Attributions réalisées
        		</f:facet>
        			#{message}
			</p:dataList>
			<br />
			<div class="ui-g-12">
				<p:commandButton value="Retour" icon="ui-icon-arrowthick-1-w"
					actionListener="#{attributionjc.retour}" />
			</div>
		</h:form>
	</div>
</h:body>
</html>
